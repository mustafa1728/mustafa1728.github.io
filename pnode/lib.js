function map(t,e){var n=[];e=e||function(t){return t};for(var r=0;r<t.length;r++)n.push(e(t[r],r,t));return n}function filter(t,e){var n=[];return e=e||function(t){return t},map(t,function(t){e(t)&&n.push(t)}),n}function getElem(t){if(!document.getElementById)throw"cannot get element: unsupported DOM";if("string"==typeof t){if(null===(t=document.getElementById(t)))throw"cannot get element: element does not exist"}else if("object"!=typeof t)throw"cannot get element: invalid datatype";return t}function hasClass(t,e){return getElem(t).className.split(" ").has(e)}function getElementsByClass(t,e,n){return n=isUndefined(n)?document:getElem(n),isUndefined(e)&&(e="*"),filter(n.getElementsByTagName(e),function(e){return hasClass(e,t)})}function listen(t,e,n){if((e=getElem(e)).addEventListener)e.addEventListener(t,n,!1);else{if(!e.attachEvent)throw"cannot add event listener";e.attachEvent("on"+t,function(){n(new W3CDOM_Event(e))})}}function mlisten(t,e,n){map(e,function(e){listen(t,e,n)})}function W3CDOM_Event(t){return this.currentTarget=t,this.preventDefault=function(){window.event.returnValue=!1},this}function isUndefined(t){var e;return t===e}Array.prototype.push||(Array.prototype.push=function(){for(var t=0;t<arguments.length;t++)this[this.length]=arguments[t];return this.length}),Array.prototype.find=function(t,e){for(var n=e=e||0;n<this.length;n++)if(this[n]==t)return n;return-1},Array.prototype.has=function(t){return-1!==this.find(t)};